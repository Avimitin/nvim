<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Customization - Nvim Guide Book</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../custom.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">English</li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> Basics</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../en_us/installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../en_us/keymap.html"><strong aria-hidden="true">1.2.</strong> Keymap</a></li><li class="chapter-item expanded "><a href="../en_us/concept.html"><strong aria-hidden="true">1.3.</strong> concept</a></li><li class="chapter-item expanded "><a href="../en_us/customize.html" class="active"><strong aria-hidden="true">1.4.</strong> Customization</a></li><li class="chapter-item expanded "><a href="../en_us/development.html"><strong aria-hidden="true">1.5.</strong> CODE_OF_CONDUCT</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">中文</li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> 基础设置</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../zh_cn/installation.html"><strong aria-hidden="true">2.1.</strong> 安装</a></li><li class="chapter-item expanded "><a href="../zh_cn/colors.html"><strong aria-hidden="true">2.2.</strong> 主题配色</a></li><li class="chapter-item expanded "><a href="../zh_cn/keymap_cn.html"><strong aria-hidden="true">2.3.</strong> 键位设置</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> 插件</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../zh_cn/plugins/nvim-tree_cn.html"><strong aria-hidden="true">3.1.</strong> nvim-tree.lua</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Nvim Guide Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="customize"><a class="header" href="#customize">Customize</a></h1>
<p>You might not want git to track some frequently changed values.
Like color scheme or some other settings.
Those settings can all define in an optional <code>Lua</code> module.</p>
<h2 id="details"><a class="header" href="#details">Details</a></h2>
<p>Rename the <code>lua/custom.example.lua</code> file to <code>lua/custom.lua</code>, then make your modification.
The <code>.gitignore</code> file contains the <code>custom.lua</code> file already.</p>
<p>Create a new configuration table and return it at the end.</p>
<pre><code class="language-lua">-- example
local my_config = {
  theme = &quot;kanagawa&quot;,

  langs = {
    &quot;fish&quot;,
    &quot;html&quot;,
    &quot;json&quot;,
    &quot;toml&quot;,
    { &quot;go&quot;, &quot;gopls&quot; },
    { { &quot;javascript&quot;, &quot;typescript&quot;, &quot;javascriptreact&quot;, &quot;typescriptreact&quot; }, &quot;eslint&quot; },
    {
      &quot;python&quot;,
      &quot;pyright&quot;,
      {
        python = {
          analysis = {
            autoSearchPaths = true,
            diagnosticMode = &quot;workspace&quot;,
            useLibraryCodeForTypes = true,
          },
        },
      },
    },
  },

  -- configuration for null-ls lsp injection
  null_ls = {
    enable_stylua_fmt = false, -- require stylua executable
  },

  autocmd_enable = {
    fcitx5 = false, -- require fcitx5-remote
    lastline = true,
    diff_on_commit = false, -- might mess up your window
  },

  markdown = {
    -- must be executable
    preview_browser = &quot;chrome&quot;,
  },
}

return my_config -- &lt;- Don't forget to return this table, or the config will not acceive what you configured
</code></pre>
<h2 id="fields"><a class="header" href="#fields">Fields</a></h2>
<p>Current supported options:</p>
<div class="table-wrapper"><table><thead><tr><th>option</th><th>meaning</th></tr></thead><tbody>
<tr><td><code>theme</code></td><td>colorscheme, read <a href="./colors.html">colors</a> for tips and tricks</td></tr>
<tr><td><code>autocmd_enable</code></td><td>List of auto commands that you want to toggle on or off</td></tr>
<tr><td><code>langs</code></td><td>An array of language layers for nvim-treesitter and lspconfig</td></tr>
<tr><td><code>markdown</code></td><td>Markdown options</td></tr>
</tbody></table>
</div>
<h3 id="langs"><a class="header" href="#langs">langs</a></h3>
<p>This fields contains an array of language layer definitions.</p>
<ul>
<li>
<p>Single string or an array with item
tells the editor to load nvim-treesitter only for this languages.</p>
</li>
<li>
<p>An array with two items tells the editor to load both of the nvim-treesitter and lspconfig plugins.
And the second items for the multi-items array should be lsp server that you want to enabled.</p>
</li>
<li>
<p>If the array contains three items, the third item will be considered as server configuration and
will be transfer to the lsp server.</p>
</li>
<li>
<p><a href="https://github.com/williamboman/nvim-lsp-installer#available-lsps">Available Lsp Servers</a></p>
</li>
<li>
<p><a href="https://github.com/nvim-treesitter/nvim-treesitter#supported-languages">Supported Languages for treesitter</a></p>
</li>
<li>
<p><a href="https://github.com/neovim/nvim-lspconfig/blob/master/doc/server_configurations.md">Lsp Server Configuration</a></p>
</li>
</ul>
<h3 id="autocmd_enable"><a class="header" href="#autocmd_enable"><code>autocmd_enable</code></a></h3>
<div class="table-wrapper"><table><thead><tr><th>cmd</th><th>function</th></tr></thead><tbody>
<tr><td><code>fcitx5</code></td><td>Enable fcitx5 auto toggle when switching insert and normal mode</td></tr>
<tr><td><code>lastline</code></td><td>Enable auto command that jump to last edit line when you open neovim</td></tr>
<tr><td><code>diff_on_commit</code></td><td>Enable auto command that open diff window when you commiting</td></tr>
</tbody></table>
</div>
<h1 id="per-language-configuration-snippets"><a class="header" href="#per-language-configuration-snippets">Per language configuration snippets</a></h1>
<h2 id="ccpp"><a class="header" href="#ccpp">c/cpp</a></h2>
<ul>
<li>Config</li>
</ul>
<p>C/CPP can be configured to use clangd as default LSP server.</p>
<pre><code class="language-lua">{ { &quot;c&quot;, &quot;cpp&quot; }, &quot;clangd&quot; },
</code></pre>
<ul>
<li>project setup</li>
</ul>
<p>The clangd respect your cmake settings.
You will need to provide the compile_commands.json file for clangd to identify
your project correctly.</p>
<pre><code class="language-console">$ cmake -H. -BDebug -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=YES
$ ln -s Debug/compile_commands.json .
</code></pre>
<ul>
<li>Makefile</li>
</ul>
<p>If you are writing C and using the Makefile, you can use the <code>:Dispatch</code> or <code>:Make</code>
command to easily build and debug your code.</p>
<ul>
<li>Resources</li>
</ul>
<blockquote>
<ul>
<li>Clangd official site: <a href="https://clangd.llvm.org/">https://clangd.llvm.org/</a></li>
<li>CMake official site: <a href="https://cmake.org/">https://cmake.org/</a></li>
</ul>
</blockquote>
<h2 id="javascripttypescript"><a class="header" href="#javascripttypescript">JavaScript/TypeScript</a></h2>
<p>Add the below script into <code>lua/custom.lua</code> file.</p>
<pre><code class="language-lua">langs = {
  &quot;html&quot;,
  &quot;css&quot;,
  &quot;json&quot;,
  { { &quot;javascript&quot;, &quot;typescript&quot;, &quot;javascriptreact&quot;, &quot;typescriptreact&quot; }, &quot;tsserver&quot; },
},
</code></pre>
<p>Inject eslint into tsserver by enable the null-ls option:</p>
<pre><code class="language-lua">null_ls = {
  enable_eslint = true, -- require eslint, useful to combine use with tsserver
  enable_prettier = true, -- require prettier, useful when you want format in js/ts{x}
},
</code></pre>
<h3 id="trouble-shooting"><a class="header" href="#trouble-shooting">Trouble Shooting</a></h3>
<ul>
<li>Neovim notify that their is no executable in <code>$PATH</code></li>
</ul>
<p>Please make sure that you have configured node.js/deno PATH correctly.
If you are using node version manager like <code>nvm</code> or other stuff, please
make sure you have enabled correct version before you start the neovim.</p>
<h2 id="rust"><a class="header" href="#rust">rust</a></h2>
<p>The plugin rust-tools.nvim has already set up LSP, format, and debug utilities.</p>
<p>See <a href="https://github.com/simrat39/rust-tools.nvim/">https://github.com/simrat39/rust-tools.nvim/</a> for what it can do.</p>
<blockquote>
<p>This plugin will setup lspconfig itself, please don't write lspconfig manually.</p>
</blockquote>
<ul>
<li>Inlay hint</li>
</ul>
<p>The rust-tools.nvim setting is located in lua/plugins/coding/config/rust-tools.lua.
And inlay hint is set up automatically after you open rust file.</p>
<p>But it will not prompt up by default due to some unknown bug.
It will only show up after you save the buffer.
So you need to manually run command <code>:w</code> when you first open the rust code.</p>
<ul>
<li>Code action</li>
</ul>
<p>You can use the keymap <kbd>LEADER ra</kbd> or keymap <code>gx</code> set by LSP to view and select
the action for Rust code. Also you can press <kbd>LEADER rr</kbd> to run test or function.</p>
<ul>
<li>Code format</li>
</ul>
<p>You can use <code>gf</code> to run the LSP built in format API. It will called the rustfmt
program.</p>
<ul>
<li>Debug</li>
</ul>
<p>You need to install <code>lldb-vscode</code>. Then run <code>:RustDebuggables</code>, it will open the
debug panel automatically.</p>
<ul>
<li>Rust Analyzer Settings</li>
</ul>
<p>You might want to make some specific rust-analyzer settings for your project.
You can create a file with name <code>.rust-analyzer.json</code> in the same directory
with the <code>Cargo.toml</code> file. Then put all the configuration you want into it.</p>
<p>Configuration reference: <a href="https://rust-analyzer.github.io/manual.html#configuration">https://rust-analyzer.github.io/manual.html#configuration</a></p>
<p>For example, if you want to enable all feature when editing the code:</p>
<pre><code class="language-bash"># cd to the root directory of your project
echo '{
  &quot;cargo&quot;: {
    &quot;allFeatures&quot;: true
  }
}' &gt; .rust-analyzer.json
</code></pre>
<ul>
<li>Gallery</li>
</ul>
<p>Please read <a href="https://github.com/simrat39/rust-tools.nvim/#demos">demo</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../en_us/concept.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../en_us/development.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../en_us/concept.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../en_us/development.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
